var ABTest=function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function r(e,r){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,r){if(e){if("string"==typeof e)return t(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,h=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){h=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(h)throw i}}}}var a=100,n="abtest-uid-",o="abtest-trace-id-",i=31536e3;function c(e,t){if(!Array.isArray(t))throw new Error("config must be an array");return function(e,t){var n={};n[e]={launch_layer:{},layer:{}};var o,i=r(t);try{for(i.s();!(o=i.n()).done;){var c=o.value,d=c.hit,s=c.layer_id,u=void 0===s?"defaultLayerId":s,l=c.version,f=void 0===l?"":l,A=c.exp_set,p=c.ref_exp_data;n[e].layer[u]={ref_exp:{data:p,bucket:h(0,(100-100*d)/100*a),version:f},exp_set:{}};var v,C=0,x=r(A);try{for(x.s();!(v=x.n()).done;){var y=v.value,g=y.id,m=y.data,_=y.weight,w=Math.round(_*a),S=h(C,w);n[e].layer[u].exp_set[g]={data:m,bucket:S,version:f},C+=w,1===_&&(n[e].launch_layer[u]={data:m,id:g,version:f})}}catch(e){x.e(e)}finally{x.f()}}}catch(e){i.e(e)}finally{i.f()}return n[e]}(e,t)}function h(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,r=new Array(t),a=e,n=0;t--;)r[n]=a,a++,n++;return r}var d,s,u={exports:{}};d=u,s=u.exports,function(e,t){var r={version:"3.0.1",x86:{},x64:{}};function a(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function n(e,t){return e<<t|e>>>32-t}function o(e){return e=a(e^=e>>>16,2246822507),e=a(e^=e>>>13,3266489909),e^=e>>>16}function i(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function h(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function u(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function l(e,t){return[e[0]^t[0],e[1]^t[1]]}function f(e){return e=l(e,[0,e[0]>>>1]),e=l(e=c(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=l(e=c(e,[3301882366,444984403]),[0,e[0]>>>1])}r.x86.hash32=function(e,t){t=t||0;for(var r=(e=e||"").length%4,i=e.length-r,c=t,h=0,d=3432918353,s=461845907,u=0;u<i;u+=4)h=a(h=255&e.charCodeAt(u)|(255&e.charCodeAt(u+1))<<8|(255&e.charCodeAt(u+2))<<16|(255&e.charCodeAt(u+3))<<24,d),h=a(h=n(h,15),s),c=a(c=n(c^=h,13),5)+3864292196;switch(h=0,r){case 3:h^=(255&e.charCodeAt(u+2))<<16;case 2:h^=(255&e.charCodeAt(u+1))<<8;case 1:h=a(h^=255&e.charCodeAt(u),d),c^=h=a(h=n(h,15),s)}return(c=o(c^=e.length))>>>0},r.x86.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,i=e.length-r,c=t,h=t,d=t,s=t,u=0,l=0,f=0,A=0,p=597399067,v=2869860233,C=951274213,x=2716044179,y=0;y<i;y+=16)u=255&e.charCodeAt(y)|(255&e.charCodeAt(y+1))<<8|(255&e.charCodeAt(y+2))<<16|(255&e.charCodeAt(y+3))<<24,l=255&e.charCodeAt(y+4)|(255&e.charCodeAt(y+5))<<8|(255&e.charCodeAt(y+6))<<16|(255&e.charCodeAt(y+7))<<24,f=255&e.charCodeAt(y+8)|(255&e.charCodeAt(y+9))<<8|(255&e.charCodeAt(y+10))<<16|(255&e.charCodeAt(y+11))<<24,A=255&e.charCodeAt(y+12)|(255&e.charCodeAt(y+13))<<8|(255&e.charCodeAt(y+14))<<16|(255&e.charCodeAt(y+15))<<24,u=n(u=a(u,p),15),c=n(c^=u=a(u,v),19),c=a(c+=h,5)+1444728091,l=n(l=a(l,v),16),h=n(h^=l=a(l,C),17),h=a(h+=d,5)+197830471,f=n(f=a(f,C),17),d=n(d^=f=a(f,x),15),d=a(d+=s,5)+2530024501,A=n(A=a(A,x),18),s=n(s^=A=a(A,p),13),s=a(s+=c,5)+850148119;switch(u=0,l=0,f=0,A=0,r){case 15:A^=e.charCodeAt(y+14)<<16;case 14:A^=e.charCodeAt(y+13)<<8;case 13:A=a(A^=e.charCodeAt(y+12),x),s^=A=a(A=n(A,18),p);case 12:f^=e.charCodeAt(y+11)<<24;case 11:f^=e.charCodeAt(y+10)<<16;case 10:f^=e.charCodeAt(y+9)<<8;case 9:f=a(f^=e.charCodeAt(y+8),C),d^=f=a(f=n(f,17),x);case 8:l^=e.charCodeAt(y+7)<<24;case 7:l^=e.charCodeAt(y+6)<<16;case 6:l^=e.charCodeAt(y+5)<<8;case 5:l=a(l^=e.charCodeAt(y+4),v),h^=l=a(l=n(l,16),C);case 4:u^=e.charCodeAt(y+3)<<24;case 3:u^=e.charCodeAt(y+2)<<16;case 2:u^=e.charCodeAt(y+1)<<8;case 1:u=a(u^=e.charCodeAt(y),p),c^=u=a(u=n(u,15),v)}return c^=e.length,c+=h^=e.length,c+=d^=e.length,h+=c+=s^=e.length,d+=c,s+=c,c=o(c),c+=h=o(h),c+=d=o(d),h+=c+=s=o(s),d+=c,s+=c,("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(s>>>0).toString(16)).slice(-8)},r.x64.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,a=e.length-r,n=[0,t],o=[0,t],d=[0,0],s=[0,0],A=[2277735313,289559509],p=[1291169091,658871167],v=0;v<a;v+=16)d=[255&e.charCodeAt(v+4)|(255&e.charCodeAt(v+5))<<8|(255&e.charCodeAt(v+6))<<16|(255&e.charCodeAt(v+7))<<24,255&e.charCodeAt(v)|(255&e.charCodeAt(v+1))<<8|(255&e.charCodeAt(v+2))<<16|(255&e.charCodeAt(v+3))<<24],s=[255&e.charCodeAt(v+12)|(255&e.charCodeAt(v+13))<<8|(255&e.charCodeAt(v+14))<<16|(255&e.charCodeAt(v+15))<<24,255&e.charCodeAt(v+8)|(255&e.charCodeAt(v+9))<<8|(255&e.charCodeAt(v+10))<<16|(255&e.charCodeAt(v+11))<<24],d=h(d=c(d,A),31),n=i(n=h(n=l(n,d=c(d,p)),27),o),n=i(c(n,[0,5]),[0,1390208809]),s=h(s=c(s,p),33),o=i(o=h(o=l(o,s=c(s,A)),31),n),o=i(c(o,[0,5]),[0,944331445]);switch(d=[0,0],s=[0,0],r){case 15:s=l(s,u([0,e.charCodeAt(v+14)],48));case 14:s=l(s,u([0,e.charCodeAt(v+13)],40));case 13:s=l(s,u([0,e.charCodeAt(v+12)],32));case 12:s=l(s,u([0,e.charCodeAt(v+11)],24));case 11:s=l(s,u([0,e.charCodeAt(v+10)],16));case 10:s=l(s,u([0,e.charCodeAt(v+9)],8));case 9:s=c(s=l(s,[0,e.charCodeAt(v+8)]),p),o=l(o,s=c(s=h(s,33),A));case 8:d=l(d,u([0,e.charCodeAt(v+7)],56));case 7:d=l(d,u([0,e.charCodeAt(v+6)],48));case 6:d=l(d,u([0,e.charCodeAt(v+5)],40));case 5:d=l(d,u([0,e.charCodeAt(v+4)],32));case 4:d=l(d,u([0,e.charCodeAt(v+3)],24));case 3:d=l(d,u([0,e.charCodeAt(v+2)],16));case 2:d=l(d,u([0,e.charCodeAt(v+1)],8));case 1:d=c(d=l(d,[0,e.charCodeAt(v)]),A),n=l(n,d=c(d=h(d,31),p))}return n=i(n=l(n,[0,e.length]),o=l(o,[0,e.length])),o=i(o,n),n=i(n=f(n),o=f(o)),o=i(o,n),("00000000"+(n[0]>>>0).toString(16)).slice(-8)+("00000000"+(n[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)},d.exports&&(s=d.exports=r),s.murmurHash3=r}();var l=u.exports;
/*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   */
var f=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},a=t||{},n=e.split(C),o=a.decode||p,i=0;i<n.length;i++){var c=n[i],h=c.indexOf("=");if(!(h<0)){var d=c.substr(0,h).trim(),s=c.substr(++h,c.length).trim();'"'==s[0]&&(s=s.slice(1,-1)),null==r[d]&&(r[d]=y(s,o))}}return r},A=function(e,t,r){var a=r||{},n=a.encode||v;if("function"!=typeof n)throw new TypeError("option encode is invalid");if(!x.test(e))throw new TypeError("argument name is invalid");var o=n(t);if(o&&!x.test(o))throw new TypeError("argument val is invalid");var i=e+"="+o;if(null!=a.maxAge){var c=a.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(c)}if(a.domain){if(!x.test(a.domain))throw new TypeError("option domain is invalid");i+="; Domain="+a.domain}if(a.path){if(!x.test(a.path))throw new TypeError("option path is invalid");i+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+a.expires.toUTCString()}a.httpOnly&&(i+="; HttpOnly");a.secure&&(i+="; Secure");if(a.sameSite){switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i},p=decodeURIComponent,v=encodeURIComponent,C=/; */,x=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function y(e,t){try{return t(e)}catch(t){return e}}return function(){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.app_id=e,this.config=r,this.model=c(e,r)}var r,h,d;return r=t,(h=[{key:"getUid",value:function(){return this.uid||f(document.cookie)[n+this.app_id]}},{key:"getTraceId",value:function(){return this.trace_id||f(document.cookie)[o+this.app_id]}},{key:"run",value:function(e){var t=this.getUid()||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),r="".concat(t,"_").concat(location.protocol+"://"+location.host+location.path),c=function(e,t,r,n,o){var i={layer:{},trace_id:[]},c=r.layer;for(var h in c)if(!t||h===t){var d=c[h],s=l.x86.hash32(n)%a;if(d.ref_exp.bucket.includes(s))i.layer[h]={hit_exp_data:d.ref_exp.data,hit_exp_id:"",version:d.ref_exp.version};else{if(r.launch_layer[h]){var u=r.launch_layer[h],f=u.data,A=u.id,p=u.version;i.layer[h]={hit_exp_data:f,hit_exp_id:A,version:p},i.trace_id.push("".concat(e,"_").concat(h,"_").concat(A,"_").concat(p));continue}var v=l.x86.hash32(n+h)%a,C=d.exp_set;for(var x in C)if(C[x].bucket.includes(v)){var y=C[x],g=y.version,m=y.data;i.layer[h]={hit_exp_data:m,hit_exp_id:x,version:g},i.trace_id.push("".concat(e,"_").concat(h,"_").concat(x,"_").concat(g));break}}}return i.trace_id=i.trace_id.join("|"),i.uid=o,i}(this.app_id,e,this.model,r,t);return function(e,t,r){var a=location.hostname,c=4===a.split(".").length?a:a.replace(/(.+)(?=\..+\..+\b)/,"");document.cookie=A("".concat(n).concat(e),t,{maxAge:i,domain:c}),document.cookie=A("".concat(o).concat(e),r,{maxAge:i,domain:c})}(this.app_id,t,c.trace_id),this.uid=t,this.trace_id=this.trace_id,c}}])&&e(r.prototype,h),d&&e(r,d),t}()}();
